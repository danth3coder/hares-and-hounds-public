{"version":3,"sources":["../node_modules/peerjs/dist sync","components/Game.js","components/MainMenu.js","components/App.js","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","HOUND","HARE","EMPTY","UPDATE_GAME","RESET_GAME","GameNode","x_pos","y_pos","type","highlighted","onClick","playable","style","left","top","className","Game","props","game_data","game_type","hare_location","hound_location","Set","conn","default_selected_node","default_matrix","1","2","3","4","5","default_state","matrix","selected_node","current_turn","turn_number","game_in_progress","winning_side","state","player_side","setGameMatrix","selectNode","bind","resetGame","endGame","resetGameButtonClick","handleReset","this","ONLINE_GAME","console","log","EndGameSessionCallback","setState","online_data","is_host","on","data","old_position","split","old_y","old_x","new_position","new_y","new_x","updateNodePosition","updateGameRound","err","parseInt","y_shift","x_shift","shifted_y_pos","shifted_x_pos","has","position_str","add","forEach","a","old_y_pos","old_x_pos","movingNodeType","delete","node_selected","valid_play","send","paths","hare_past_hounds","hound","hound_x","toString","hare_trapped","hare_y","hare_x","setOfPath","path","path_y","path_x","turn","close","game_nodes","currentNode","isHighlighted","isPlayable","push","getGameNodes","toUpperCase","src","alt","Component","MainMenu","peer_data","localGameStart","attemptConnectionCallback","useState","change_id","peer_id","loaded","connecting","onChange","event","target","value","LOCAL_GAME","App","peer","Peer","active","onlineGameStart","endGameSession","connectToId","error","connect","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.baf790e9.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 18;","import React, { Component } from \"react\";\r\nimport { LOCAL_GAME, ONLINE_GAME } from \"./App\";\r\n\r\nconst HOUND = \"hound\";\r\nconst HARE = \"hare\";\r\nconst EMPTY = \"empty\";\r\n\r\nconst UPDATE_GAME = \"update_game\";\r\nconst RESET_GAME = \"reset_game\";\r\n\r\nclass Game extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.game_data = this.props.game_data;\r\n        this.game_type = this.game_data.type;\r\n\r\n        this.hare_location = \"\";\r\n        this.hound_location = new Set();\r\n\r\n        this.conn = this.props.conn;\r\n\r\n        this.default_selected_node = {\r\n            y_pos: 0,\r\n            x_pos: 0,\r\n            type: EMPTY,\r\n        };\r\n\r\n        this.default_matrix = {\r\n            1: {\r\n                2: {},\r\n                3: {},\r\n                4: {},\r\n            },\r\n            2: {\r\n                1: {},\r\n                2: {},\r\n                3: {},\r\n                4: {},\r\n                5: {},\r\n            },\r\n            3: {\r\n                2: {},\r\n                3: {},\r\n                4: {},\r\n            },\r\n        };\r\n\r\n        /*\r\n            node information:\r\n            {\r\n                type: (empty|hare|hound)\r\n                paths: [\r\n                    [everyone], [haresonly]\r\n                ]\r\n            }\r\n        */\r\n        this.default_state = {\r\n            matrix: this.default_matrix,\r\n            selected_node: this.default_selected_node,\r\n            current_turn: HOUND,\r\n            turn_number: 1,\r\n            game_in_progress: false,\r\n            winning_side: \"\",\r\n        };\r\n\r\n        this.state = {\r\n            ...this.default_state,\r\n            player_side: \"\",\r\n        };\r\n\r\n        this.default_state = this.state;\r\n        this.setGameMatrix();\r\n\r\n        this.selectNode = this.selectNode.bind(this);\r\n        this.resetGame = this.resetGame.bind(this);\r\n        this.endGame = this.endGame.bind(this);\r\n        this.resetGameButtonClick = this.handleReset.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.game_type === ONLINE_GAME) {\r\n            if (this.conn === null) {\r\n                console.log(\"no connection\");\r\n                this.EndGameSessionCallback();\r\n                return;\r\n            }\r\n\r\n            this.setState({\r\n                player_side: this.game_data.online_data.is_host ? HOUND : HARE,\r\n            });\r\n\r\n            this.conn.on(\"data\", (data) => {\r\n                switch (data.type) {\r\n                    case UPDATE_GAME:\r\n                        var [old_y, old_x] = data.old_position.split(\",\");\r\n                        var [new_y, new_x] = data.new_position.split(\",\");\r\n                        this.updateNodePosition(old_y, old_x, new_y, new_x);\r\n                        this.updateGameRound();\r\n                        break;\r\n                    case RESET_GAME:\r\n                        this.resetGame();\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            });\r\n\r\n            this.conn.on(\"error\", (err) => {\r\n                console.log(err);\r\n                this.props.EndGameSessionCallback();\r\n            });\r\n\r\n            this.conn.on(\"close\", () => {\r\n                this.props.EndGameSessionCallback();\r\n            });\r\n        }\r\n\r\n        this.setState({ game_in_progress: true });\r\n    }\r\n\r\n    componentWillUnmount() {}\r\n\r\n    setGameMatrix() {\r\n        var matrix = this.state.matrix;\r\n\r\n        // populating position with default key-values & adding routes\r\n        for (var y_pos in matrix) {\r\n            for (var x_pos in matrix[y_pos]) {\r\n                y_pos = parseInt(y_pos);\r\n                x_pos = parseInt(x_pos);\r\n\r\n                matrix[y_pos][x_pos][\"type\"] = EMPTY;\r\n                matrix[y_pos][x_pos][\"paths\"] = [new Set(), new Set()];\r\n\r\n                for (var y_shift = -1; y_shift <= 1; y_shift++) {\r\n                    for (var x_shift = -1; x_shift <= 1; x_shift++) {\r\n                        var shifted_y_pos = y_pos + y_shift;\r\n                        var shifted_x_pos = x_pos + x_shift;\r\n\r\n                        if (\r\n                            (x_pos % 2 === 0 && y_pos % 2 === 0) ||\r\n                            (y_pos % 2 !== 0 && x_pos % 2 !== 0)\r\n                        ) {\r\n                            var fourdirection = new Set([\r\n                                \"-1,0\",\r\n                                \"1,0\",\r\n                                \"0,-1\",\r\n                                \"0,1\",\r\n                            ]);\r\n                            if (!fourdirection.has(`${y_shift},${x_shift}`)) {\r\n                                continue;\r\n                            }\r\n                        }\r\n\r\n                        if (\r\n                            shifted_y_pos in matrix &&\r\n                            shifted_x_pos in matrix[shifted_y_pos] &&\r\n                            !(\r\n                                shifted_x_pos === x_pos &&\r\n                                shifted_y_pos === y_pos\r\n                            )\r\n                        ) {\r\n                            var position_str = `${shifted_y_pos},${shifted_x_pos}`;\r\n\r\n                            // hare-only path\r\n                            if (shifted_x_pos < x_pos) {\r\n                                matrix[y_pos][x_pos][\"paths\"][1].add(\r\n                                    position_str\r\n                                );\r\n                            }\r\n\r\n                            // hound & hare path\r\n                            else {\r\n                                matrix[y_pos][x_pos][\"paths\"][0].add(\r\n                                    position_str\r\n                                );\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // setting piece positions\r\n        matrix[1][2][\"type\"] = HOUND;\r\n        matrix[2][1][\"type\"] = HOUND;\r\n        matrix[3][2][\"type\"] = HOUND;\r\n\r\n        [\"1,2\", \"2,1\", \"3,2\"].forEach((a) => this.hound_location.add(a));\r\n\r\n        matrix[2][5][\"type\"] = HARE;\r\n        this.hare_location = \"2,5\";\r\n\r\n        this.setState({ matrix: matrix });\r\n    }\r\n\r\n    updateNodePosition(old_y_pos, old_x_pos, y_pos, x_pos) {\r\n        var matrix = this.state.matrix;\r\n        var movingNodeType = matrix[old_y_pos][old_x_pos][\"type\"];\r\n\r\n        matrix[old_y_pos][old_x_pos][\"type\"] = EMPTY;\r\n        matrix[y_pos][x_pos][\"type\"] = movingNodeType;\r\n\r\n        if (movingNodeType === HOUND) {\r\n            this.hound_location.delete(`${old_y_pos},${old_x_pos}`);\r\n            this.hound_location.add(`${y_pos},${x_pos}`);\r\n        } else {\r\n            this.hare_location = `${y_pos},${x_pos}`;\r\n        }\r\n\r\n        this.setState({\r\n            matrix: matrix,\r\n        });\r\n    }\r\n\r\n    selectNode(y_pos, x_pos) {\r\n        if (\r\n            (this.game_type === ONLINE_GAME &&\r\n                this.state.current_turn !== this.state.player_side) ||\r\n            !this.state.game_in_progress\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        var node_selected = this.state.matrix[y_pos][x_pos];\r\n\r\n        if (\r\n            this.state.selected_node[\"type\"] !== EMPTY &&\r\n            node_selected[\"type\"] === EMPTY\r\n        ) {\r\n            var valid_play = false;\r\n\r\n            if (this.state.selected_node[\"type\"] === HOUND) {\r\n                if (\r\n                    this.state.selected_node[\"paths\"][0].has(\r\n                        `${y_pos},${x_pos}`\r\n                    )\r\n                ) {\r\n                    this.updateNodePosition(\r\n                        this.state.selected_node.y_pos,\r\n                        this.state.selected_node.x_pos,\r\n                        y_pos,\r\n                        x_pos\r\n                    );\r\n\r\n                    valid_play = true;\r\n                }\r\n            } else {\r\n                if (\r\n                    this.state.selected_node[\"paths\"][0].has(\r\n                        `${y_pos},${x_pos}`\r\n                    ) ||\r\n                    this.state.selected_node[\"paths\"][1].has(\r\n                        `${y_pos},${x_pos}`\r\n                    )\r\n                ) {\r\n                    this.updateNodePosition(\r\n                        this.state.selected_node.y_pos,\r\n                        this.state.selected_node.x_pos,\r\n                        y_pos,\r\n                        x_pos\r\n                    );\r\n\r\n                    valid_play = true;\r\n                }\r\n            }\r\n\r\n            if (valid_play) {\r\n                if (this.game_type === ONLINE_GAME) {\r\n                    this.conn.send({\r\n                        type: UPDATE_GAME,\r\n                        old_position: `${this.state.selected_node.y_pos},${this.state.selected_node.x_pos}`,\r\n                        new_position: `${y_pos},${x_pos}`,\r\n                    });\r\n                }\r\n\r\n                this.setState({ selected_node: this.default_selected_node });\r\n                this.updateGameRound();\r\n            }\r\n        }\r\n\r\n        // havent made a selection yet or choosing another\r\n        else {\r\n            if (node_selected[\"type\"] === this.state.current_turn) {\r\n                this.setState({\r\n                    selected_node: {\r\n                        y_pos: y_pos,\r\n                        x_pos: x_pos,\r\n                        type: node_selected[\"type\"],\r\n                        paths: node_selected[\"paths\"],\r\n                    },\r\n                });\r\n            } else {\r\n                this.setState({\r\n                    selected_node: this.default_selected_node,\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    updateGameRound() {\r\n        this.setState({ turn_number: this.state.turn_number + 1 });\r\n        // WIN CONDITION FOR HARE\r\n\r\n        var hare_past_hounds = true;\r\n\r\n        this.hound_location.forEach((hound) => {\r\n            var hound_x = hound.toString().split(\",\")[1];\r\n            var hare_x = this.hare_location.split(\",\")[1];\r\n\r\n            if (hare_x > hound_x) {\r\n                hare_past_hounds = false;\r\n            }\r\n        });\r\n\r\n        if (this.state.turn_number > 20 || hare_past_hounds) {\r\n            console.log(\"hare wins!\");\r\n            this.setState({ game_in_progress: false });\r\n        }\r\n\r\n        // WIN CONDITION FOR HOUND\r\n\r\n        var hare_trapped = true;\r\n        var [hare_y, hare_x] = this.hare_location.split(\",\");\r\n        var paths = this.state.matrix[hare_y][hare_x][\"paths\"];\r\n        for (var setOfPath in paths) {\r\n            paths[setOfPath].forEach(\r\n                // eslint-disable-next-line no-loop-func\r\n                (path) => {\r\n                    var [path_y, path_x] = path.toString().split(\",\");\r\n\r\n                    if (this.state.matrix[path_y][path_x][\"type\"] === EMPTY) {\r\n                        hare_trapped = false;\r\n                    }\r\n                }\r\n            );\r\n        }\r\n\r\n        if (hare_trapped) {\r\n            console.log(\"hounds wins!\");\r\n            this.setState({ game_in_progress: false });\r\n        }\r\n\r\n        var turn = this.state.current_turn === HARE ? HOUND : HARE;\r\n        this.setState({ current_turn: turn });\r\n    }\r\n\r\n    resetGame() {\r\n        this.hare_location = \"\";\r\n        this.hound_location = new Set();\r\n\r\n        this.setState({ ...this.state, ...this.default_state });\r\n        this.setGameMatrix();\r\n\r\n        if (this.game_type === ONLINE_GAME) {\r\n            console.log(this.state.player_side)\r\n            // swap sides\r\n            this.setState({\r\n                player_side: this.state.player_side === HOUND ? HARE : HOUND,\r\n            });\r\n        }\r\n\r\n        this.setState({ game_in_progress: true });\r\n    }\r\n\r\n    endGame() {\r\n        if (this.game_type === ONLINE_GAME) {\r\n            this.conn.close();\r\n        } else {\r\n            this.props.EndGameSessionCallback();\r\n        }\r\n    }\r\n\r\n    handleReset() {\r\n        this.resetGame();\r\n\r\n        if (this.game_type === ONLINE_GAME) {\r\n            this.conn.send({ type: RESET_GAME });\r\n        }\r\n    }\r\n\r\n    getGameNodes() {\r\n        var game_nodes = [];\r\n\r\n        for (var y_pos in this.state.matrix) {\r\n            for (var x_pos in this.state.matrix[y_pos]) {\r\n                var currentNode = this.state.matrix[y_pos][x_pos];\r\n                var isHighlighted = false;\r\n                var isPlayable = false;\r\n\r\n                if (this.state.selected_node !== this.default_selected_node) {\r\n                    // show avaliable paths for selected node     \r\n                    if (\r\n                        this.state.selected_node[\"type\"] === HOUND &&\r\n                        this.state.selected_node[\"paths\"][0].has(\r\n                            `${y_pos},${x_pos}`\r\n                        ) &&\r\n                        currentNode[\"type\"] === EMPTY\r\n                    ) {\r\n                        isHighlighted = true;\r\n                        isPlayable = true;\r\n                    }\r\n\r\n                    // case for hare\r\n                    else if (\r\n                        this.state.selected_node[\"type\"] === HARE &&\r\n                        (this.state.selected_node[\"paths\"][0].has(\r\n                            `${y_pos},${x_pos}`\r\n                        ) ||\r\n                            this.state.selected_node[\"paths\"][1].has(\r\n                                `${y_pos},${x_pos}`\r\n                            )) &&\r\n                        currentNode[\"type\"] === EMPTY\r\n                    ) {\r\n                        isHighlighted = true;\r\n                        isPlayable = true;\r\n                    }\r\n                }\r\n\r\n                if (\r\n                    this.game_type === ONLINE_GAME &&\r\n                    this.state.current_turn !== this.state.player_side\r\n                ) {\r\n                    isPlayable = false;\r\n                }\r\n\r\n                else if (currentNode[\"type\"] === this.state.current_turn) {\r\n                    isPlayable = true;\r\n                }\r\n\r\n                if (!this.state.game_in_progress) {\r\n                    isPlayable = false;\r\n                    isHighlighted = false;\r\n                }\r\n\r\n                game_nodes.push(\r\n                    <GameNode\r\n                        x_pos={x_pos}\r\n                        y_pos={y_pos}\r\n                        type={currentNode[\"type\"]}\r\n                        highlighted={isHighlighted}\r\n                        onClick={this.selectNode}\r\n                        key={`${y_pos}-${x_pos}`}\r\n                        playable={isPlayable}\r\n                    ></GameNode>\r\n                );\r\n            }\r\n        }\r\n\r\n        return game_nodes;\r\n    }\r\n\r\n    render() {\r\n        var game_nodes = this.getGameNodes();\r\n\r\n        return (\r\n            <>\r\n                <h1>{this.game_type.toUpperCase()} GAME</h1>\r\n                <div className=\"game\">\r\n                    <img\r\n                        src=\"https://www.neok12.com/games/hare-hounds/grid.png\"\r\n                        alt=\"\"\r\n                        key=\"gameboard\"\r\n                    ></img>\r\n                    {game_nodes}\r\n                </div>\r\n                <div className=\"information\">\r\n                    <p>\r\n                        Current turn:{\" \"}\r\n                        <b>{this.state.current_turn.toUpperCase()}S</b>\r\n                    </p>\r\n                    {this.game_type === ONLINE_GAME && (\r\n                        <p>You are: {this.state.player_side}</p>\r\n                    )}\r\n                </div>\r\n                <div className=\"buttons\">\r\n                    {!this.state.game_in_progress && (\r\n                        <button onClick={this.handleReset}>\r\n                            Reset Game\r\n                        </button>\r\n                    )}\r\n                    <button onClick={this.endGame}>Return Back</button>\r\n                </div>\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\nfunction GameNode({ x_pos, y_pos, type, highlighted, onClick, playable }) {\r\n    var style = {\r\n        left: (x_pos - 1) * 139 + 23,\r\n        top: (y_pos - 1) * 120 + 27,\r\n    };\r\n\r\n    var className = `node ${type || `${y_pos},${x_pos}`} ${\r\n        highlighted ? \"highlighted\" : \"\"\r\n    } ${playable ? \"playable\" : \"\"}`;\r\n\r\n    var handleClick = () => onClick(y_pos, x_pos);\r\n\r\n    return <div className={className} style={style} onClick={handleClick} />;\r\n}\r\n\r\n// eslint-disable-next-line no-unused-vars\r\nfunction coordinateToText(x_pos, y_pos) {\r\n    return `${x_pos},${y_pos}`;\r\n}\r\n\r\n// eslint-disable-next-line no-unused-vars\r\nfunction textToCoordinate(string) {\r\n    return string.split(\",\");\r\n}\r\n\r\nexport default Game;\r\n","import React, { useState } from \"react\";\r\n\r\nfunction MainMenu({ peer_data, localGameStart, attemptConnectionCallback }) {\r\n    var [id, change_id] = useState(\"\");\r\n    \r\n    var peer_id = peer_data.err ? (\r\n        <p>{peer_data.err.toString()}</p>\r\n    ) : !peer_data.loaded ? (\r\n        <p>Loading P2P...</p>\r\n    ) : (\r\n        <p>Peer id is: {peer_data.id}</p>\r\n    );\r\n\r\n    function handleChange(event) {\r\n        change_id(event.target.value);\r\n    }\r\n\r\n    return (\r\n        <>\r\n            {peer_data.connecting ? <p>Connecting...</p> : peer_id}\r\n            <button onClick={localGameStart}>Local Game</button>\r\n            <input onChange={handleChange}></input>\r\n            {peer_data.loaded && !peer_data.err && (\r\n                <button onClick={() => attemptConnectionCallback(id)}>\r\n                    Online Game\r\n                </button>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default MainMenu;\r\n","import \"./App.css\";\n\nimport React, { Component } from \"react\";\nimport Peer from \"peerjs\";\nimport Game from \"./Game\";\nimport MainMenu from \"./MainMenu\";\n\nexport const LOCAL_GAME = \"local\";\nexport const ONLINE_GAME = \"online\";\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n        this.peer = new Peer();\n        this.conn = null;\n\n        this.state = {\n            peer_data: {\n                err: \"\",\n                connecting: false,\n                loaded: false,\n                id: \"\",\n            },\n            game_data: {\n                active: false,\n                type: LOCAL_GAME,\n                online_data: {\n                    conn: null,\n                    is_host: false,\n                },\n            },\n        };\n\n        this.localGameStart = this.localGameStart.bind(this);\n        this.onlineGameStart = this.onlineGameStart.bind(this);\n        this.endGameSession = this.endGameSession.bind(this);\n        this.connectToId = this.connectToId.bind(this);\n    }\n\n    componentDidMount() {\n        this.peer.on(\"error\", (error) => {\n            console.log(error);\n            this.setState({\n                peer_data: {\n                    ...this.state.peer_data,\n                    err: error,\n                    connecting: false,\n                },\n                game_data: {\n                    ...this.state.game_data,\n                    active: false,\n                },\n            });\n        });\n\n        this.peer.on(\"open\", (id) => {\n            this.setState({\n                peer_data: {\n                    ...this.state.peer_data,\n                    loaded: true,\n                    id: id,\n                },\n            });\n        });\n\n        this.peer.on(\"connection\", (conn) => {\n            conn.on(\"open\", () => {\n                this.onlineGameStart(conn, true);\n            });\n        });\n    }\n\n    endGameSession() {\n        /*if (this.state.peer_data.connections > 0) {\n            this.state.peer_data.destroy();\n        }*/\n\n        this.setState({\n            game_data: { ...this.state.game_data, active: false },\n        });\n    }\n\n    connectToId(id) {\n        if (id === \"\") return\n\n        this.setState({\n            peer_data: { ...this.state.peer_data, connecting: true },\n        });\n        var conn = this.peer.connect(id);\n\n        conn.on(\"open\", () => {\n            this.setState({\n                peer_data: { ...this.state.peer_data, connecting: false },\n            });\n            this.onlineGameStart(conn, false);\n        });\n    }\n\n    localGameStart() {\n        this.setState({\n            game_data: {\n                ...this.state.game_data,\n                type: LOCAL_GAME,\n                active: true,\n            },\n        });\n    }\n\n    onlineGameStart(conn, is_host) {\n        this.conn = conn;\n\n        this.setState({\n            game_data: {\n                ...this.state.game_data,\n                type: ONLINE_GAME,\n                active: true,\n                online_data: {\n                    ...this.state.game_data.online_data,\n                    is_host: is_host,\n                },\n            },\n        });\n    }\n\n    render() {\n        return (\n            <div className=\"App\">\n                <h1>HARES AND HOUNDS</h1>\n\n                <header className=\"App-header\">\n                    {!this.state.game_data.active ? (\n                        <MainMenu\n                            peer_data={this.state.peer_data}\n                            localGameStart={this.localGameStart}\n                            attemptConnectionCallback={this.connectToId}\n                        />\n                    ) : (\n                        <Game\n                            game_data={this.state.game_data}\n                            EndGameSessionCallback={this.endGameSession}\n                            conn={this.conn}\n                        />\n                    )}\n                </header>\n\n                <p>Map graphic provided by blah</p>\n            </div>\n        );\n    }\n}\n\nexport default App;\n","import \"./index.css\";\n\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);"],"sourceRoot":""}